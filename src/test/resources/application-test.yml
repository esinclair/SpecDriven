# SpecDriven Test Configuration
# Overrides for test execution environment

# Feature Flags (enable for most tests)
feature-flag:
  users-api: true  # Enable users API for integration tests (disable in specific feature flag tests)

# JWT Configuration (test values)
jwt:
  secret: test-jwt-secret-key-for-integration-tests-minimum-256-bits-required-not-for-production-use
  expirationMs: 86400000  # 24 hours

# Spring Boot Test Configuration
spring:
  application:
    name: SpecDriven-Test

  # Test Database Configuration (H2 in-memory)
  datasource:
    url: jdbc:h2:mem:testdb;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=FALSE
    driver-class-name: org.h2.Driver
    username: sa
    password:

  # H2 Console disabled in tests
  h2:
    console:
      enabled: false

  # Flyway for test migrations
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    clean-disabled: false  # Allow clean for tests

  # JPA/Hibernate Configuration
  jpa:
    hibernate:
      ddl-auto: none  # Let Flyway handle schema
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: true

# Server Configuration (random port for tests)
server:
  port: 0  # Random available port
  error:
    include-message: always
    include-binding-errors: never
    include-stacktrace: never
    include-exception: false

# Logging Configuration (reduced for tests)
logging:
  level:
    root: WARN
    com.example.specdriven: INFO
    org.springframework.security: WARN
    org.flywaydb: WARN
  pattern:
    console: "%d{HH:mm:ss.SSS} - %msg%n"
